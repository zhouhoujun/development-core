"use strict";function bindingConfig(e){return currentOperation(e.env,e),e.fileFilter=e.fileFilter||utils_1.files,e.runSequence=e.runSequence||taskSequence_1.runSequence,e.addToSequence=e.addToSequence||taskSequence_1.addToSequence,e.generateTask=e.generateTask||function(t,r){return generateTask_1.generateTask(t,_.extend(createDefaultMatch(e),r||{}))},e.findTasks=e.findTasks||function(t,r){return decorator_1.findTasksInModule(t,_.extend(createDefaultMatch(e),r||{}))},e.findTasksInDir=e.findTasksInDir||function(t,r){return decorator_1.findTasksInDir(t,_.extend(createDefaultMatch(e),r||{}))},e.findTaskDefine=e.findTaskDefine||decorator_1.findTaskDefineInModule.bind(e),e.findTaskDefineInDir=e.findTaskDefineInDir||decorator_1.findTaskDefineInDir.bind(e),e.subTaskName=e.subTaskName||function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";n=_.isString(t)?t:t&&e.option!==t?utils_1.taskStringVal(t.name,e.oper):r;var i=utils_1.taskStringVal(e.option.name,e.oper);return i?i+"-"+n:n},e.getSrc=e.getSrc||function(t,r){var n=void 0;return t&&(n=utils_1.taskSourceVal(getAssertSrc(t,r),e.oper)),n||(n=utils_1.taskSourceVal(getAssertSrc(e.option,r),e.oper)),n},e.getDist=e.getDist||function(t){if(t){var r=getCurrentDist(t,e.oper);if(r)return r}return getCurrentDist(e.option,e.oper)},e}function currentOperation(e,t){var r=void 0;return r=e.deploy?TaskConfig_1.Operation.deploy:e.release?TaskConfig_1.Operation.release:TaskConfig_1.Operation.build,e.watch&&(r|=TaskConfig_1.Operation.watch),e.test&&(r|=TaskConfig_1.Operation.test),e.serve&&(r|=TaskConfig_1.Operation.serve),e.e2e&&(r|=TaskConfig_1.Operation.e2e),t?(t.oper=(t.oper||0)|r,t.oper):r}function getAssertSrc(e,t){var r=null;return t&&(t.oper=t.oper||TaskConfig_1.Operation.default,(t.oper&TaskConfig_1.Operation.test)>0?r=e.testSrc:(t.oper&TaskConfig_1.Operation.e2e)>0?r=e.e2eSrc:(t.oper&TaskConfig_1.Operation.watch)>0?r=e.watchSrc:(t.oper&TaskConfig_1.Operation.clean)>0&&(r=e.cleanSrc||e.dist)),r||e.src}function getCurrentDist(e,t){var r=void 0;return(t&TaskConfig_1.Operation.build)>0?r=e.buildDist||utils_1.taskStringVal(e.dist,t):(t&TaskConfig_1.Operation.release)>0?r=e.releaseDist||utils_1.taskStringVal(e.dist,t):(t&TaskConfig_1.Operation.deploy)>0?r=e.deployDist||utils_1.taskStringVal(e.dist,t):(t&TaskConfig_1.Operation.test)>0?r=e.testDist||e.buildDist||utils_1.taskStringVal(e.dist,t):(t&TaskConfig_1.Operation.e2e)>0&&(r=e.e2eDist||e.buildDist||utils_1.taskStringVal(e.dist,t)),r}var _=require("lodash"),TaskConfig_1=require("./TaskConfig"),generateTask_1=require("./generateTask"),taskSequence_1=require("./taskSequence"),utils_1=require("./utils"),decorator_1=require("./decorator");exports.bindingConfig=bindingConfig;var createDefaultMatch=function(e){var t={oper:e.oper};return e.match&&(t.match=function(r){return e.match(t,r)}),t};exports.currentOperation=currentOperation;
//# sourceMappingURL=sourcemaps/bindingConfig.js.map
