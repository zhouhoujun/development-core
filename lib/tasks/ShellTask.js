"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coregulp=require("gulp"),chalk=require("chalk"),_=require("lodash"),RunWay_1=require("../RunWay"),ShellTask=function(){function e(e,r){this.info=e,this.cmd=r}return e.prototype.getInfo=function(){return this.info},e.prototype.execute=function(e,r){var t=e.option,n=e.to(this.cmd);return Promise.resolve(n).then(function(r){if(_.isString(r))return e.execShell(r,t.execOptions,!1!==t.allowError);if(_.isArray(r)){if(t.shellRunWay===RunWay_1.RunWay.sequence){var n=Promise.resolve();return _.each(r,function(r){n=n.then(function(){return e.execShell(r,t.execOptions)})}),n}return Promise.all(_.map(r,function(r){return e.execShell(r,t.execOptions,!1!==t.allowError)}))}return Promise.reject("shell task config error")})},e.prototype.setup=function(e,r){var t=this;r=r||coregulp;var n=e.taskName(this.getInfo());return console.log("register shell task:",chalk.cyan(n)),r.task(n,function(){return t.execute(e,r)}),this.info.taskName=n,n},e}();exports.ShellTask=ShellTask;
//# sourceMappingURL=../sourcemaps/tasks/ShellTask.js.map
