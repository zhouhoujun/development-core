"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coregulp=require("gulp"),chalk=require("chalk"),_=require("lodash"),RunWay_1=require("../RunWay"),ExecFileTask=function(){function e(e,r){this.info=e,this.files=r}return e.prototype.getInfo=function(){return this.info},e.prototype.execute=function(e,r){var t=e.option,i=e.to(this.files);return Promise.resolve(i).then(function(r){if(_.isString(r))return e.execFile(r,t.args,t.execFileOptions,!1!==t.allowError);if(_.isArray(r)){if(t.fileRunWay===RunWay_1.RunWay.sequence){var i=Promise.resolve();return _.each(r,function(r){i=i.then(function(){return e.execFile(r,t.args,t.execFileOptions,!1!==t.allowError)})}),i}return Promise.all(_.map(r,function(r){return e.execFile(r,t.args,t.execFileOptions,!1!==t.allowError)}))}return Promise.reject("exec file task config error")})},e.prototype.setup=function(e,r){var t=this;r=r||coregulp;var i=e.taskName(this.getInfo());return console.log("register exec file task:",chalk.cyan(i)),r.task(i,function(){return t.execute(e,r)}),this.info.taskName=i,i},e}();exports.ExecFileTask=ExecFileTask;
//# sourceMappingURL=../sourcemaps/tasks/ExecFileTask.js.map
