"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var chalk=require("chalk"),_=require("lodash"),taskSequence_1=require("../taskSequence"),watch=require("gulp-watch"),DynamicWatchTask=function(){function t(t,e){this.info=t,this.dt=e}return t.prototype.getInfo=function(){return this.info},t.prototype.execute=function(t,e){return Promise.resolve()},t.prototype.setup=function(t,e){var n,a=this.dt,c=_.isFunction(a.watchTasks)?a.watchTasks(t,a):a.watchTasks;n=_.isFunction(_.last(c))?c.pop():function(e){a.watchChanged&&a.watchChanged(e,t)},c=_.map(c,function(e){return _.isString(e)?t.taskName(e):e});var r=this.getInfo(),s=t.taskName(r);return console.log("register watch  dynamic task:",chalk.cyan(s)),e.task(s,function(){var a=t.getSrc(r);console.log("watch, src:",chalk.cyan.call(chalk,a)),watch(a,function(){taskSequence_1.runSequence(e,c).then(function(){n&&n()})})}),s},t}();exports.DynamicWatchTask=DynamicWatchTask;
//# sourceMappingURL=../sourcemaps/tasks/DynamicWatchTask.js.map
