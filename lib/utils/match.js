"use strict";function matchCompare(r,e,t){return!!matchTaskInfo(r,e,t)&&!!matchTaskGroup(e,t)}function contains(r,e){return e.some(function(e){return r.indexOf(e)>=0})}function convertMatchOper(r,e){var t=r.to(e.oper);return t&Operation_1.Operation.test&&!(t&Operation_1.Operation.release)&&(t|=Operation_1.Operation.build),t&Operation_1.Operation.e2e&&!(t&Operation_1.Operation.release)&&(t|=Operation_1.Operation.build),t&Operation_1.Operation.deploy&&(t=t|Operation_1.Operation.test|Operation_1.Operation.e2e),t&Operation_1.Operation.release&&(t|=Operation_1.Operation.test),e.oper=t,e}function matchTaskInfo(r,e,t){if(t=oper_1.convertOper(t,Operation_1.Operation.build),e=oper_1.convertOper(e),t.match)return t.match(e);if(e.match)return e.match(t);t=convertMatchOper(r,t);var o=r.to(e.oper),i=r.to(t.oper),n=o&i;if(n<=0)return!1;if(o&Operation_1.Operation.watch){if((i&Operation_1.Operation.watch)<=0)return!1;if(n<=Operation_1.Operation.watch)return!1}if(o&Operation_1.Operation.serve){if(!(i&Operation_1.Operation.serve))return!1;if(n<=Operation_1.Operation.serve)return!1}if(o&Operation_1.Operation.test){if(!(i&Operation_1.Operation.test))return!1;if(n<=Operation_1.Operation.test)return!1}if(o&Operation_1.Operation.e2e){if(!(i&Operation_1.Operation.e2e))return!1;if(n<=Operation_1.Operation.e2e)return!1}return!0}function matchTaskGroup(r,e){if(r.group&&e&&e.group){if(_.isString(e.group)){if(_.isString(r.group)&&r.group!==e.group)return!1;if(_.isArray(r.group)&&r.group.indexOf(e.group)<0)return!1}else if(_.isArray(e.group)){if(_.isString(r.group)&&e.group.indexOf(r.group)<0)return!1;if(_.isArray(r.group)&&!contains(r.group,e.group))return!1}}else{if(r.group)return!1;if(e&&e.group)return!1}return!0}Object.defineProperty(exports,"__esModule",{value:!0});var _=require("lodash"),Operation_1=require("../Operation"),oper_1=require("./oper");exports.matchCompare=matchCompare;
//# sourceMappingURL=../sourcemaps/utils/match.js.map
