"use strict";function files(r,e){var t=[];return e=e||function(r){return!0},_.each(fs_1.readdirSync(r),function(o){var n=r+"/"+o,i=fs_1.lstatSync(n);i.isDirectory()?t=t.concat(files(n,e)):e(n)&&t.push(n)}),t}function sortOrder(r,e){return _.orderBy(_.filter(r,function(r){return r}),function(t){if(_.isArray(t))return.5;var o=e(t);return _.isFunction(o)?o=o(r.length):_.isNumber(o)||(o=.5),o>1?o%r.length/r.length:(o<0&&(o=0),o)})}function taskSourceVal(r,e){return _.isFunction(r)?r(e):r||""}function taskStringVal(r,e){return _.isFunction(r)?r(e):r||""}function contains(r,e){return e.some(function(e){return r.indexOf(e)>=0})}function convertOper(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TaskConfig_1.Operation.default;return r=r||{},r.oper=r.oper||e,r}function convertMatchOper(r){return r.oper&TaskConfig_1.Operation.test&&!(r.oper&TaskConfig_1.Operation.release)&&(r.oper=r.oper|TaskConfig_1.Operation.build),r.oper&TaskConfig_1.Operation.e2e&&!(r.oper&TaskConfig_1.Operation.release)&&(r.oper=r.oper|TaskConfig_1.Operation.build),r.oper&TaskConfig_1.Operation.deploy&&(r.oper=r.oper|TaskConfig_1.Operation.test|TaskConfig_1.Operation.e2e),r.oper&TaskConfig_1.Operation.release&&(r.oper=r.oper|TaskConfig_1.Operation.test),r}function someOper(r,e){return(r&e)>0}function matchTaskInfo(r,e){if(e=convertOper(e,TaskConfig_1.Operation.build),r=convertOper(r),e.match)return e.match(r);if(r.match)return r.match(e);e=convertMatchOper(e);var t=r.oper&e.oper;if(t<=0)return!1;if(r.oper&TaskConfig_1.Operation.watch){if((e.oper&TaskConfig_1.Operation.watch)<=0)return!1;if(t<=TaskConfig_1.Operation.watch)return!1}if(r.oper&TaskConfig_1.Operation.serve){if(!(e.oper&TaskConfig_1.Operation.serve))return!1;if(t<=TaskConfig_1.Operation.serve)return!1}if(r.oper&TaskConfig_1.Operation.test){if(!(e.oper&TaskConfig_1.Operation.test))return!1;if(t<=TaskConfig_1.Operation.test)return!1}if(r.oper&TaskConfig_1.Operation.e2e){if(!(e.oper&TaskConfig_1.Operation.e2e))return!1;if(t<=TaskConfig_1.Operation.e2e)return!1}return!0}function matchTaskGroup(r,e){if(r.group&&e&&e.group){if(_.isString(e.group)){if(_.isString(r.group)&&r.group!==e.group)return!1;if(_.isArray(r.group)&&r.group.indexOf(e.group)<0)return!1}else if(_.isArray(e.group)){if(_.isString(r.group)&&e.group.indexOf(r.group)<0)return!1;if(_.isArray(r.group)&&!contains(r.group,e.group))return!1}}else{if(r.group)return!1;if(e&&e.group)return!1}return!0}function absolutePath(r,e){return!r||path.isAbsolute(e)?e:path.join(r,e)}function absoluteSrc(r,e){return _.isString(e)?prefixSrc(r,e):_.map(e,function(e){return prefixSrc(r,e)})}function prefixSrc(r,e){var t="";return/^!/.test(e)&&(t="!",e=e.substring(1,e.length)),t+absolutePath(r,e)}var _=require("lodash"),TaskConfig_1=require("./TaskConfig"),fs_1=require("fs"),path=require("path");exports.files=files,exports.sortOrder=sortOrder,exports.taskSourceVal=taskSourceVal,exports.taskStringVal=taskStringVal,exports.convertOper=convertOper,exports.someOper=someOper,exports.matchTaskInfo=matchTaskInfo,exports.matchTaskGroup=matchTaskGroup,exports.absolutePath=absolutePath,exports.absoluteSrc=absoluteSrc;
//# sourceMappingURL=sourcemaps/utils.js.map
