"use strict";function files(r,e){var o=[];return e=e||function(r){return!0},_.each(fs_1.readdirSync(r),function(t){var n=r+"/"+t,i=fs_1.lstatSync(n);i.isDirectory()?o=o.concat(files(n,e)):e(n)&&o.push(n)}),o}function taskSourceVal(r,e,o){return _.isFunction(r)?r(e,o):r||""}function taskStringVal(r,e,o){return _.isFunction(r)?r(e,o):r||""}function contains(r,e){return e.some(function(e){return r.indexOf(e)>=0})}function convertOper(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:TaskConfig_1.Operation.default;return r=r||{},r.watch&&(r.oper=(r.oper||e)|TaskConfig_1.Operation.watch),r.e2e&&(r.oper=(r.oper||e)|TaskConfig_1.Operation.e2e),r.test&&(r.oper=(r.oper||e)|TaskConfig_1.Operation.test),r.oper=r.oper||e,r}function convertMatchOper(r){return r.oper&TaskConfig_1.Operation.test&&!(r.oper&TaskConfig_1.Operation.release)&&(r.oper=r.oper|TaskConfig_1.Operation.build),r.oper&TaskConfig_1.Operation.e2e&&!(r.oper&TaskConfig_1.Operation.release)&&(r.oper=r.oper|TaskConfig_1.Operation.build),r.oper&TaskConfig_1.Operation.deploy&&(r.oper=r.oper|TaskConfig_1.Operation.test|TaskConfig_1.Operation.e2e),r.oper&TaskConfig_1.Operation.release&&(r.oper=r.oper|TaskConfig_1.Operation.test),r}function someOper(r,e){return(r&e)>0}function matchTaskInfo(r,e){if(e=convertOper(e,TaskConfig_1.Operation.build),r=convertOper(r),e.match)return e.match(r);if(r.match)return r.match(e);e=convertMatchOper(e);var o=r.oper&e.oper;if(o<=0)return!1;if(r.oper&TaskConfig_1.Operation.watch){if((e.oper&TaskConfig_1.Operation.watch)<=0)return!1;if(o<=TaskConfig_1.Operation.watch)return!1}if(r.oper&TaskConfig_1.Operation.serve){if(!(e.oper&TaskConfig_1.Operation.serve))return!1;if(o<=TaskConfig_1.Operation.serve)return!1}if(r.oper&TaskConfig_1.Operation.test){if(!(e.oper&TaskConfig_1.Operation.test))return!1;if(o<=TaskConfig_1.Operation.test)return!1}if(r.oper&TaskConfig_1.Operation.e2e){if(!(e.oper&TaskConfig_1.Operation.e2e))return!1;if(o<=TaskConfig_1.Operation.e2e)return!1}return!0}function matchTaskGroup(r,e){if(r.group&&e&&e.group){if(_.isString(e.group)){if(_.isString(r.group)&&r.group!==e.group)return!1;if(_.isArray(r.group)&&r.group.indexOf(e.group)<0)return!1}else if(_.isArray(e.group)){if(_.isString(r.group)&&e.group.indexOf(r.group)<0)return!1;if(_.isArray(r.group)&&!contains(r.group,e.group))return!1}}else{if(r.group)return!1;if(e&&e.group)return!1}return!0}function absolutePath(r,e){return!r||path.isAbsolute(e)?e:path.join(r,e)}function absoluteSrc(r,e){return _.isString(e)?absolutePath(r,e):_.map(e,function(e){return absolutePath(r,e)})}var _=require("lodash"),TaskConfig_1=require("./TaskConfig"),fs_1=require("fs"),path=require("path");exports.files=files,exports.taskSourceVal=taskSourceVal,exports.taskStringVal=taskStringVal,exports.convertOper=convertOper,exports.someOper=someOper,exports.matchTaskInfo=matchTaskInfo,exports.matchTaskGroup=matchTaskGroup,exports.absolutePath=absolutePath,exports.absoluteSrc=absoluteSrc;
//# sourceMappingURL=sourcemaps/utils.js.map
