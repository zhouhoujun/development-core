"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},__decorate=function(e,t,s,a){var r,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(n<3?r(o):n>3?r(t,s,o):r(t,s))||o);return n>3&&o&&Object.defineProperty(t,s,o),o},__metadata=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},mocha=require("gulp-mocha"),del=require("del"),cache=require("gulp-cached"),ts=require("gulp-typescript"),sourcemaps=require("gulp-sourcemaps"),tsProject=ts.createProject("tsconfig.json"),uglify=require("gulp-uglify"),babel=require("gulp-babel"),src_1=require("../../src"),TestTaskGA=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskGA")}}]),e}();TestTaskGA=__decorate([src_1.task({group:["test","node"]}),__metadata("design:paramtypes",[Object])],TestTaskGA),exports.TestTaskGA=TestTaskGA;var TestTaskGB=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskGB")}}]),e}();TestTaskGB=__decorate([src_1.task({group:["node"]}),__metadata("design:paramtypes",[Object])],TestTaskGB),exports.TestTaskGB=TestTaskGB;var TestTaskGC=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskGC")}}]),e}();TestTaskGC=__decorate([src_1.task({group:["test","node"]}),__metadata("design:paramtypes",[Object])],TestTaskGC),exports.TestTaskGC=TestTaskGC;var TestTaskA=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){}}]),e}();TestTaskA=__decorate([src_1.task,__metadata("design:paramtypes",[Object])],TestTaskA),exports.TestTaskA=TestTaskA;var TestTaskE=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskE")}}]),e}();TestTaskE=__decorate([src_1.task(),__metadata("design:paramtypes",[Object])],TestTaskE),exports.TestTaskE=TestTaskE;var TestPipeTask=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.name="pipetask",e}return _inherits(t,e),_createClass(t,[{key:"pipes",value:function(e,t,s){return[function(){return cache("typescript")},sourcemaps.init,tsProject]}}]),t}(src_1.PipeTask);TestPipeTask=__decorate([src_1.task({group:"pipetask"}),__metadata("design:paramtypes",[])],TestPipeTask),exports.TestPipeTask=TestPipeTask;var TestDynamicTask=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"tasks",value:function(){return[{name:"test-tscompile",src:"src/**/*.ts",dist:"lib",pipes:[function(){return cache("typescript")},sourcemaps.init,tsProject],output:[function(e,t,s,a){return e.dts.pipe(a.dest(t.getDist(s)))},function(e,t,s,a){return t.oper&src_1.Operation.release||t.oper&src_1.Operation.deploy?e.js.pipe(babel({presets:["es2015"]})).pipe(uglify()).pipe(sourcemaps.write("./sourcemaps")).pipe(a.dest(t.getDist(s))):e.js.pipe(sourcemaps.write("./sourcemaps")).pipe(a.dest(t.getDist(s)))}]},{name:"test-test",src:"test/**/*spec.ts",order:function(e){return console.log("total:",e),1/e},oper:src_1.Operation.test|src_1.Operation.release|src_1.Operation.deploy,pipe:function(e){return e.pipe(mocha()).once("error",function(){process.exit(1)})}},{name:"test-watch",src:"src/**/*.ts",watchTasks:["tscompile"]},{name:"test-clean",order:0,src:"src",dist:"lib",task:function(e){return del(e.getDist())}}]}}]),e}();TestDynamicTask=__decorate([src_1.dynamicTask,__metadata("design:paramtypes",[])],TestDynamicTask),exports.TestDynamicTask=TestDynamicTask;var TaskDefine=function(){function e(){_classCallCheck(this,e),this.fags="define"}return _createClass(e,[{key:"loadConfig",value:function(e,t){return src_1.bindingConfig({option:e,env:t})}}]),e}();TaskDefine=__decorate([src_1.taskdefine,__metadata("design:paramtypes",[])],TaskDefine),exports.TaskDefine=TaskDefine;var TestTaskB=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskB")}}]),e}();TestTaskB=__decorate([src_1.task({order:function(e){return 1/e}}),__metadata("design:paramtypes",[Object])],TestTaskB),exports.TestTaskB=TestTaskB;var TestTaskC=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskC")}}]),e}();TestTaskC=__decorate([src_1.task({oper:src_1.Operation.build|src_1.Operation.test}),__metadata("design:paramtypes",[Object])],TestTaskC),exports.TestTaskC=TestTaskC;var TestTaskD=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskD")}}]),e}();TestTaskD=__decorate([src_1.task({oper:src_1.Operation.release|src_1.Operation.deploy}),__metadata("design:paramtypes",[Object])],TestTaskD),exports.TestTaskD=TestTaskD;var TestTaskW=function(){function e(t){_classCallCheck(this,e),this.info=t}return _createClass(e,[{key:"getInfo",value:function(){return this.info}},{key:"setup",value:function(e,t){return e.subTaskName("TestTaskW")}}]),e}();TestTaskW=__decorate([src_1.task({oper:src_1.Operation.build|src_1.Operation.test|src_1.Operation.watch}),__metadata("design:paramtypes",[Object])],TestTaskW),exports.TestTaskW=TestTaskW;
//# sourceMappingURL=../sourcemaps/tasks2/task.js.map
